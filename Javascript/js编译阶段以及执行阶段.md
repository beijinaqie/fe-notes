js代码能够正常完整的执行下来需要三个角色

+ js引擎

从头到尾负责整个 JavaScript 程序的编译及执行过程。

+ 编译器

词法分析/分词。 对代码进行分词，比如var a = 2;分成var、a、=、2 、;。空格是否会被当作词法单元，取决于空格在 这门语言中是否具有意义

语法分析/解析。 这个过程是将词法单元流(数组)转换成一个由元素逐级嵌套所组成的代表了程序语法 结构的树。这个树被称为“抽象语法树”(Abstract Syntax Tree，AST)

代码生成。 将 AST 转换为可执行代码的过程称被称为代码生成。这个过程与语言、目标平台等息 息相关。

+ 作用域

负责收集并维护由所有声明的标识符(变量)组成的一系列查询，并实施一套非常严格的规则，确定当前执行的代码对这些标识符(变量)的访问权限

js不像其它语言一样需要编译后运行，而作为一门解释性语言，js是边编译边执行，借助`JIT(Just-In-Time，中文名叫即时编译器)`进行优化。通常我们叫js的编译叫做预编译，发生在执行代码的前几微秒到十几微妙之间。

js代码的执行过程分为两个阶段，一个是编译阶段，一个是执行阶段。编译阶段由编译器完成，将代码翻译成可执行代码，这个阶段作用域规则会确定。执行阶段由引擎完成，主要任务是执行可执行代码，执行上下文在这个阶段创建。